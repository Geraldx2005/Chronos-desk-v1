import t from"node:path";import{fileURLToPath as r}from"node:url";import{app as s,BrowserWindow as i,session as w,ipcMain as c}from"electron";var d=t.dirname(r(import.meta.url));console.log("Preload path:",t.join(d,"../electron/preload.js"));function m(){let o=new i({width:1e3,height:600,webPreferences:{preload:t.join(d,"../electron/preload.js")}});c.on("electron-download",(l,n)=>{let e=i.getFocusedWindow();e&&e.webContents.downloadURL(n)}),o.loadFile(t.join(d,"../renderer/dist/index.html")),w.defaultSession.on("will-download",(l,n)=>{let e=n.getFilename();o.webContents.send("download-started",e),n.once("done",(p,a)=>{a==="completed"?o.webContents.send("download-complete",e):o.webContents.send("download-failed",e)})})}s.whenReady().then(m);
